<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>TH1 - Bootstrap Grid Responsive</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .navbar-custom {
            background: #0099dd;
            color: #fff;
            font-size: 20px;
            font-weight: bold;
            letter-spacing: 1px;
        }

        .form-label {
            font-weight: bold;
        }

        .btn-custom {
            background: #31a8ff;
            color: #fff;
            font-weight: bold;
            border: none;
            transition: background 0.2s, transform 0.2s;
        }

        .btn-custom:hover {
            background: #1480c9;
            transform: scale(1.04);
        }

        th,
        td {
            border: 1px solid #00ec5b;
            ;
        }

        table thead th {
            background-color: #b7e7c2 !important;
            color: #1d3557 !important;
        }

        table tbody tr:hover {
            background-color: #7ea0b5 !important;
            text-decoration: underline !important;
            transition: background 0.2s !important;
        }


        .alert-custom {
            font-weight: bold;
            margin-bottom: 15px;
            padding-left: 10px;
            border-radius: 4px;
            background-color: #eafaf1;
            color: #2fb360;
            font-size: 16px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .card {
            border-radius: 10px;
            box-shadow: 0 2px 10px #e0eaff;
        }

        .btn-primary {
            width: 150px;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-custom mb-4">
        <div class="container">
            Quản lý sinh viên
        </div>
    </nav>

    <div class="container">
        <div class="row g-4">
            <div class="col-12 col-lg-4">
                <div class="card p-3">

                    <h4 id="formTitle" class=" mb-3 text-center"
                        style="background: #93d4fd; border-radius: 5px; padding:10px;">
                        Thêm sinh viên</h4>
                    <!-- <div id="thongBao" class="alert-custom">
                    </div> -->
                    <form>
                        <div class="mb-3 row">
                            <label for="MaSV" class="col-sm-4 col-form-label form-label">Mã sinh viên:</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="MaSV" name="MaSV" required
                                    placeholder="VD: SV001">
                            </div>
                        </div>
                        <div class="mb-3 row">
                            <label for="HoTen" class="col-sm-4 col-form-label form-label">Họ và tên:</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="HoTen" name="HoTen" required
                                    placeholder="VD: Nguyễn Văn A">
                            </div>
                        </div>
                        <div class="mb-3 row">
                            <label for="Email" class="col-sm-4 col-form-label form-label">Email:</label>
                            <div class="col-sm-8">
                                <input type="email" class="form-control" id="Email" name="Email" required
                                    placeholder="VD: example@gmail.com">
                            </div>
                        </div>
                        <div class="mb-3 row">
                            <label for="NgaySinh" class="col-sm-4 col-form-label form-label">Ngày sinh:</label>
                            <div class="col-sm-8">
                                <input type="date" class="form-control" id="NgaySinh" name="NgaySinh"
                                    placeholder="Chọn ngày sinh">
                            </div>
                        </div>
                        <div class="mb-3 row align-items-center">
                            <label class="col-sm-4 col-form-label form-label">Giới tính:</label>
                            <div class="col-sm-8">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" id="Nam" name="gender" value="Nam">
                                    <label class="form-check-label" for="Nam">Nam</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" id="Nu" name="gender" value="Nữ">
                                    <label class="form-check-label" for="Nu">Nữ</label>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3 row">
                            <label for="GhiChu" class="col-sm-4 col-form-label form-label">Ghi chú:</label>
                            <div class="col-sm-8">
                                <textarea class="form-control" id="GhiChu" name="GhiChu" rows="2"
                                    placeholder="Nhập ghi chú (nếu có)"></textarea>
                            </div>
                        </div>
                        <div class="text-end">
                            <button type="submit" class="btn btn-custom" id="btnThem" onclick="formthem()">Thêm sinh
                                viên</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Bảng bên phải -->
            <div class="col-12 col-lg-8">
                <div class="card p-3">
                    <h4 class="mb-3 text-center" style="background: #03e9fa; border-radius: 5px; padding:10px;">Danh
                        sách sinh viên</h4>
                    <div id="thongBao" class="alert-custom"></div>
                    <!-- <button class="btn btn-sm btn-primary mb-3" id="btnThem" onclick="themSV()">+ Thêm sinh
                        viên</button> -->
                    <div class="table-responsive">
                        <table class="table align-middle" id="studentTable">
                            <thead>
                                <tr>
                                    <th>STT</th>
                                    <th>Mã SV</th>
                                    <th>Họ tên</th>
                                    <th>Email</th>
                                    <th>Giới tính</th>
                                    <th>Ngày sinh</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>1</td>
                                    <td>SV001</td>
                                    <td>Nguyễn Minh Chiến</td>
                                    <td>minhchien@gmail.com</td>
                                    <td>Nam</td>
                                    <td>2004-05-10</td>
                                    <td>
                                        <button class="btn btn-sm btn-outline-primary me-1"
                                            onclick="suaDong(this)">Sửa</button>
                                        <button href="#" class="btn btn-sm btn-outline-danger"
                                            onclick="xoaDong(this)">Xoá</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>SV002</td>
                                    <td>Trần Thị Thuỳ</td>
                                    <td>thithuy@gmail.com</td>
                                    <td>Nữ</td>
                                    <td>2002-08-15</td>
                                    <td>
                                        <button class="btn btn-sm btn-outline-primary me-1"
                                            onclick="suaDong(this)">Sửa</button>
                                        <button href="#" class="btn btn-sm btn-outline-danger"
                                            onclick="xoaDong(this)">Xoá</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td>SV003</td>
                                    <td>Phạm Anh Quốc</td>
                                    <td>quoc@gmail.com</td>
                                    <td>Nam</td>
                                    <td>2004-01-20</td>
                                    <td>
                                        <button class="btn btn-sm btn-outline-primary me-1"
                                            onclick="suaDong(this)">Sửa</button>
                                        <button href="#" class="btn btn-sm btn-outline-danger"
                                            onclick="xoaDong(this)">Xoá</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <script>
        let selectedRow = null;
        let stt = 5;

        // document.getElementById("btnThem").addEventListener("click", function () {
        //     alert("Đã nhấn nút Thêm");
        // });

        let table = document.getElementById("studentTable").getElementsByTagName('tbody')[0];
        let newRow = table.insertRow();
        newRow.insertCell(0).innerHTML = "4";
        newRow.insertCell(1).innerHTML = "SV004";
        newRow.insertCell(2).innerHTML = "Nguyễn Văn B";
        newRow.insertCell(3).innerHTML = "vanb@gmail.com";
        newRow.insertCell(4).innerHTML = "Nam";
        newRow.insertCell(5).innerHTML = "2003-03-15";
        newRow.insertCell(6).innerHTML = ' <button class="btn btn-sm btn-outline-primary me-1" onclick="suaDong(this)">Sửa</button> <button onclick="xoaDong(this)" class="btn btn-sm btn-outline-danger">Xoá</button>';

        function formthem() {
            const maSV = document.getElementById("MaSV").value.trim();
            const hoTen = document.getElementById("HoTen").value.trim();
            const email = document.getElementById("Email").value.trim();
            const ngaySinh = document.getElementById("NgaySinh").value;
            const gender = document.getElementById("Nam").checked ? "Nam" : (document.getElementById("Nu").checked ? "Nữ" : "");

            const regexMaSV = /^SV\d{3}$/i;
            const regexEmail = /^\S+@\S+\.\S+$/;
            const regexTen = /^[a-zA-ZÀ-ỹ\s]+$/u;

            if (maSV === "") {
                alert("Mã sinh viên không được để trống!");
                return;
            }
            if (!regexMaSV.test(maSV)) {
                alert("Mã sinh viên phải theo định dạng SVxxx (VD: SV001)!");
                return;
            }

            if (hoTen === "") {
                alert("Họ và tên không được để trống!");
                return;
            }
            if (!regexTen.test(hoTen)) {
                alert("Họ và tên chỉ được chứa chữ cái và khoảng trắng!");
                return;
            }

            if (email === "") {
                alert("Email không được để trống!");
                return;
            }
            if (!regexEmail.test(email)) {
                alert("Email không đúng định dạng!");
                return;
            }

            if (ngaySinh === "") {
                alert("Vui lòng chọn ngày sinh!");
                return;
            }

            if (!gender) {
                alert("Vui lòng chọn giới tính!");
                return;
            }

            const table = document.getElementById("studentTable").getElementsByTagName('tbody')[0];
            const newRow = table.insertRow();

            newRow.insertCell(0).innerText = stt++;
            newRow.insertCell(1).innerText = maSV;
            newRow.insertCell(2).innerText = hoTen;
            newRow.insertCell(3).innerText = email;
            newRow.insertCell(4).innerText = gender;
            newRow.insertCell(5).innerText = ngaySinh;
            newRow.insertCell(6).innerHTML = `<button class="btn btn-sm btn-outline-primary me-1" onclick="suaDong(this)">Sửa</button>
        <button class="btn btn-sm btn-outline-danger" onclick="xoaDong(this)">Xoá</button>`;


            const form = document.querySelector('form');

            document.getElementById("thongBao").innerHTML = "Thêm sinh viên thành công!";
            setTimeout(() => {
                document.getElementById("thongBao").innerHTML = "";
            }, 3000);
            form.reset();


        }
        function thongBao(message) {
            const tbDiv = document.getElementById("thongBao");
            tbDiv.innerHTML = message;
            setTimeout(() => {
                tbDiv.innerHTML = "";
            }, 3000);
        }

        function xoaDong(btn) {
            if (confirm("Bạn có chắc chắn muốn xoá?")) {
                btn.parentElement.parentElement.remove();
                thongBao("<span style='color: red;'>Xoá thành công!</span>");
            }
        }

        function suaDong(btn) {
            selectedRow = btn.parentElement.parentElement;

            document.getElementById("MaSV").value = selectedRow.cells[1].innerText;
            document.getElementById("HoTen").value = selectedRow.cells[2].innerText;
            document.getElementById("Email").value = selectedRow.cells[3].innerText;
            const gioiTinh = selectedRow.cells[4].innerText;
            document.getElementById("NgaySinh").value = selectedRow.cells[5].innerText;

            if (gioiTinh === "Nam") {
                document.getElementById("Nam").checked = true;
            } else {
                document.getElementById("Nu").checked = true;
            }

            const btnSubmit = document.querySelector(".btn-custom");
            btnSubmit.innerText = "Cập nhật";
            document.getElementById("formTitle").innerText = "Sửa sinh viên";
            btnSubmit.onclick = capNhatSinhVien;
        }

        function capNhatSinhVien() {
            if (!selectedRow) return;

            const maSV = document.getElementById("MaSV").value.trim();
            const hoTen = document.getElementById("HoTen").value.trim();
            const email = document.getElementById("Email").value.trim();
            const ngaySinh = document.getElementById("NgaySinh").value;
            const gioiTinh = document.getElementById("Nam").checked ? "Nam" : "Nữ";

            selectedRow.cells[1].innerText = maSV;
            selectedRow.cells[2].innerText = hoTen;
            selectedRow.cells[3].innerText = email;
            selectedRow.cells[4].innerText = gioiTinh;
            selectedRow.cells[5].innerText = ngaySinh;

            thongBao("Cập nhật thành công!");

            document.querySelector("form").reset();
            document.querySelector(".btn-custom").innerText = "Thêm sinh viên";
            document.querySelector(".btn-custom").onclick = formthem;
            document.getElementById("formTitle").innerText = "Thêm sinh viên";
            selectedRow = null;
        }

    </script>
</body>

</html>